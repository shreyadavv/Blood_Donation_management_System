{% extends 'base.html' %}
{% block content %}
<h3 class="mb-3">Search Donors</h3>
<form method="post" class="row g-3 mb-3">
  <div class="col-md-4">
    <label class="form-label">Blood Group</label>
    <select name="blood_group" class="form-select">
      <option value="">Any</option>
      {% for bg in blood_groups %}
        <option value="{{ bg }}" {% if selected_group == bg %}selected{% endif %}>{{ bg }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-4">
    <label class="form-label">Location (optional)</label>
    <input type="text" name="location" class="form-control" placeholder="City / Area" value="{{ location }}">
  </div>
  <div class="col-md-4 d-flex align-items-end">
    <button class="btn btn-danger w-100">Search</button>
  </div>
</form>

{% if results %}
<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Age</th>
        <th>Gender</th>
        <th>Blood Group</th>
        <th>Contact</th>
        <th>Location</th>
        <th>Last Donated</th>
      </tr>
    </thead>
    <tbody>
      {% for d in results %}
      <tr>
        <td>{{ d.id }}</td>
        <td>{{ d.name }}</td>
        <td>{{ d.age }}</td>
        <td>{{ d.gender }}</td>
        <td><span class="badge bg-danger">{{ d.blood_group }}</span></td>
        <td>{{ d.contact }}</td>
        <td>{{ d.location }}</td>
        <td>{{ d.last_donated or '-' }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
  <p class="text-muted">No results yet. Use the filters and click Search.</p>
{% endif %}
{% endblock %}